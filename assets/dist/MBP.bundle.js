!function(){"use strict";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:String(t)}e.d(t,{default:function(){return M}});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"replaceString",value:function(e,t,n){return!!(e&&e.innerHTML&&t&&"string"==typeof t&&n&&"string"==typeof n)&&(e.innerHTML=e.innerHTML.replace(t,n),!0)}},{key:"fetchPage",value:function(e){return new Promise((function(t,n){fetch(e).then((function(e){e.text().then((function(e){t(document.createRange().createContextualFragment(e))})).catch(n)})).catch(n)}))}},{key:"fetchData",value:function(e){return new Promise((function(t,n){fetch("/assets/json/data/".concat(e,".json")).then((function(e){e.json().then(t).catch(n)})).catch(n)}))}},{key:"formatDate",value:function(t,n){var o=new Date(t),r=new Intl.DateTimeFormat(n,{month:"long"}).format(o);return"en"===n?"".concat(r," ").concat(o.getDate(),", ").concat(o.getFullYear()):"".concat(o.getDate()," ").concat(e.capitalizeFirstLetter(r)," ").concat(o.getFullYear())}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}],null&&o(t.prototype,null),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:String(t)}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=t.lang,this._nls=t.nls,this._dom=null,this._initDOM().then(this._translatePage.bind(this)).then(this._appendPage.bind(this))}var t,n;return t=e,(n=[{key:"_initDOM",value:function(){var e=this;return new Promise((function(t){e._dom=document.getElementById("scene").firstElementChild.cloneNode(!0),document.getElementById("scene").innerHTML="",requestAnimationFrame(t)}))}},{key:"_translatePage",value:function(){var e=this;return new Promise((function(t){i.replaceString(e._dom,"{{HOMEPAGE_MANTRA}}",e._nls.mantra),i.replaceString(e._dom,"{{HOMEPAGE_DESCRIPTION}}",e._nls.description),requestAnimationFrame(t)}))}},{key:"_appendPage",value:function(){document.getElementById("scene").appendChild(this._dom),document.getElementById("scene").classList.add("home")}},{key:"dom",get:function(){return this._dom}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,m(o.key),o)}}function m(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:String(t)}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=t.lang,this._nls=t.nls,this._dom=null,this._subpages={},this._scrolls={music:[]},this._currentPage="music",i.fetchPage("/assets/html/creation.html").then(this._initDOM.bind(this)).then(this._fetchSubpages.bind(this)).then(this._translateSubpages.bind(this)).then(i.fetchData.bind(this,"creation")).then(this._buildDOM.bind(this)).then(this._events.bind(this)).then(this._switchView.bind(this,"music")).catch((function(e){return console.error(e)}))}var t,n;return t=e,(n=[{key:"_initDOM",value:function(e){var t=this;return new Promise((function(n){t._dom=document.createElement("DIV"),t._dom.appendChild(e),n()}))}},{key:"_fetchSubpages",value:function(){var e=this;return new Promise((function(t){for(var n=[],o=["music","podcast","video","photo","software"],r=function(t){n.push(new Promise((function(n){i.fetchPage("/assets/html/creation/".concat(o[t],".html")).then((function(r){var i=document.createElement("DIV");i.classList.add(o[t]),i.appendChild(r),e._subpages[o[t]]=i,n()}))})))},a=0;a<o.length;++a)r(a);Promise.all(n).then(t)}))}},{key:"_translateSubpages",value:function(){var e=this;return new Promise((function(t){i.replaceString(e._subpages.music,"{{MUSIC_TITLE}}",e._nls.music.title),i.replaceString(e._subpages.music,"{{MUSIC_DESCRIPTION}}",e._nls.music.description),i.replaceString(e._subpages.podcast,"{{PODCAST_TITLE}}",e._nls.podcast.title),i.replaceString(e._subpages.podcast,"{{PODCAST_DESCRIPTION}}",e._nls.podcast.description),i.replaceString(e._subpages.video,"{{VIDEO_TITLE}}",e._nls.video.title),i.replaceString(e._subpages.video,"{{VIDEO_DESCRIPTION}}",e._nls.video.description),i.replaceString(e._subpages.photo,"{{PHOTO_EXPOSITION_TITLE}}",e._nls.photo.expositionTitle),i.replaceString(e._subpages.photo,"{{PHOTO_EXPOSITION_DESCRIPTION}}",e._nls.photo.expositionDescription),i.replaceString(e._subpages.photo,"{{PHOTO_EVENT_TITLE}}",e._nls.photo.eventTitle),i.replaceString(e._subpages.photo,"{{PHOTO_EVENT_DESCRIPTION}}",e._nls.photo.eventDescription),i.replaceString(e._subpages.software,"{{SOFTWARE_TITLE}}",e._nls.software.title),i.replaceString(e._subpages.software,"{{SOFTWARE_DESCRIPTION1}}",e._nls.software.description1),i.replaceString(e._subpages.software,"{{SOFTWARE_DESCRIPTION2}}",e._nls.software.description2),i.replaceString(e._subpages.software,"{{SOFTWARE_CREATION}}",e._nls.software.creation),i.replaceString(e._subpages.software,"{{SOFTWARE_ARTISTS_WEBSITE}}",e._nls.software.artistsWebsite),t()}))}},{key:"_buildDOM",value:function(e){var t=this;return new Promise((function(n){t.__buildMusicDOM(e.music).then(t.__buildPodcastDOM.bind(t,e.podcast)).then(t.__buildVideoDOM.bind(t,e.video)).then(t.__buildPhotoDOM.bind(t,e.photo)).then(t.__buildSoftwareDOM.bind(t,e.software)).then(n)}))}},{key:"__buildMusicDOM",value:function(e){var t=this;return new Promise((function(n){for(var o=function(){var n=document.createElement("DIV");n.classList.add("band");var o=document.createElement("DIV");n.appendChild(o),o.outerHTML='\n          <div class="band-image" data-url="'.concat(e.artists[r].mainLink,'">\n            <img src="').concat(e.artists[r].image,'" alt="band-image">\n          </div>\n        '),o.outerHTML.replace("\n",""),n.firstElementChild.addEventListener("click",(function(){window.open(n.firstElementChild.dataset.url,"_blank","noopener, noreferrer")}));var a=document.createElement("DIV");n.appendChild(a),a.classList.add("band-releases");var c=document.createElement("DIV");a.appendChild(c);for(var l="",s=0;s<e.artists[r].genres.length;++s)l+="<span>".concat(e.artists[r].genres[s],"</span>");c.outerHTML='\n          <div class="band-header">\n            <h2><a href="'.concat(e.artists[r].mainLink,'" target="_blank" rel="noreferrer noopener" alt="band-tree">').concat(e.artists[r].name,"</a></h2>\n            <p>").concat(l,"</p>\n          </div>\n        "),c.outerHTML.replace("\n","");var d=document.createElement("DIV");d.classList.add("band-albums"),a.appendChild(d);for(var u=0;u<e.artists[r].releases.length;++u){var m=e.releases[e.artists[r].releases[u]],p=document.createElement("DIV");d.appendChild(p),p.outerHTML='\n            <div class="album">\n              <img src="'.concat(m.image,'" alt="release-cover">\n              <p>').concat(m.name,'</p>\n              <div class="album-overlay">\n                <p><b>').concat(e.artists[r].releases[u],"</b></p>\n                <p>").concat(i.formatDate(m.date,t._lang),'</p>\n                <a href="').concat(m.mainLink,'" target="_blank" rel="noreferrer noopener">').concat(t._nls.music.listenOnline,"</a>\n              </div>\n            </div>\n          "),p.outerHTML.replace("\n","")}t._scrolls.music.push(new window.ScrollBar({target:d,horizontal:!0})),t._subpages.music.firstElementChild.appendChild(n)},r=0;r<e.artists.length;++r)o();n()}))}},{key:"__buildPodcastDOM",value:function(e){var t=this;return new Promise((function(n){for(var o=0;o<e.length;++o){var r=document.createElement("DIV");r.classList.add("collection");var i=document.createElement("H2");i.innerHTML=e[o].name;var a=document.createElement("P");a.innerHTML=e[o].description[t._lang],r.appendChild(i),r.appendChild(a);for(var c=document.createElement("DIV"),l=0;l<e[o].episodes.length;++l){var s=document.createElement("DIV");s.classList.add("item");var d=document.createElement("IMG");d.src=e[o].episodes[l].image;var u=document.createElement("DIV");u.classList.add("content"),u.innerHTML='\n            <span>\n              <h1><a href="'.concat(e[o].episodes[l].link,'" target="_blank" rel="noreferrer noopener">').concat(e[o].episodes[l].title,"</a></h1>\n            </span>\n            <p>").concat(e[o].episodes[l].description[t._lang],"</p>\n          "),u.innerHTML.replace("\n","");var m=document.createElement("DIV");m.classList.add("links");for(var p=0;p<e[o].episodes[l].links.length;++p){var h=document.createElement("A");h.innerHTML=e[o].episodes[l].links[p].name,h.href=e[o].episodes[l].links[p].url,h.target="_blank",h.rel="noreferrer noopener",m.appendChild(h)}u.appendChild(m),s.appendChild(d),s.appendChild(u),c.appendChild(s)}r.appendChild(c),t._subpages.podcast.querySelector("#podcast-list").appendChild(r)}n()}))}},{key:"__buildVideoDOM",value:function(e){var t=this;return new Promise((function(n){for(var o=0;o<e.length;++o){var r=document.createElement("DIV");r.classList.add("embed-video"),r.innerHTML='\n          <iframe src="'.concat(e[o].url,'" title="').concat(e[o].artist," – ").concat(e[o].name,'" allowfullscreen="" sandbox="allow-same-origin allow-scripts allow-popups" frameborder="0"></iframe>\n          <h2>').concat(e[o].artist," – ").concat(e[o].name,", ").concat(i.formatDate(e[o].date,t._lang),"</h2>\n        "),r.innerHTML.replace("\n",""),t._subpages.video.querySelector("#video-grid").appendChild(r)}n()}))}},{key:"__buildPhotoDOM",value:function(e){var t=this;return new Promise((function(n){for(var o=function(e){for(var t=this.getBoundingClientRect(),n=(e.clientX-t.x)/t.width*100,o=0;o<this.children.length;++o)this.children[o].style.opacity=0;this.children[this.children.length-Math.floor(n/20)-1].style.opacity=1},r=function(n){var r=document.createElement("DIV");r.classList.add("artist"),r.innerHTML='\n          <div id="expo-'.concat(n+1,'-img-wrapper" class="img-wrapper">\n            <img src="/assets/img/photo/expo/').concat(n+1,'/5_thb.webp" loading="lazy" alt="expo-').concat(n+1,'-5">\n            <img src="/assets/img/photo/expo/').concat(n+1,'/4_thb.webp" loading="lazy" alt="expo-').concat(n+1,'-4">\n            <img src="/assets/img/photo/expo/').concat(n+1,'/3_thb.webp" loading="lazy" alt="expo-').concat(n+1,'-3">\n            <img src="/assets/img/photo/expo/').concat(n+1,'/2_thb.webp" loading="lazy" alt="expo-').concat(n+1,'-2">\n            <img src="/assets/img/photo/expo/').concat(n+1,'/1_thb.webp" alt="expo-').concat(n+1,'-1">\n          </div>\n          <h3><em><a href="').concat(e.exposition.artist[n].url,'" target="_blank" rel="noreferrer noopener">').concat(e.exposition.artist[n].photographer,"</a> – ").concat(e.exposition.artist[n].title,"</em></h3>\n        "),r.addEventListener("click",(function(){t._openPhotoExpositionModal(e.exposition.prices,e.exposition.artist[n])})),t._subpages.photo.querySelector("#expo-grid").appendChild(r),r.firstElementChild.addEventListener("mousemove",o)},i=0;i<e.exposition.artist.length;++i)r(i);for(var a=function(n){var o=document.createElement("DIV");o.classList.add("photo-element"),o.innerHTML='\n          <img src="'.concat(e.event[n].image,'" data-url="').concat(e.event[n].image,'" alt="mbp-photo">\n          <p>').concat(e.event[n].name,' – © <i><a href="').concat(e.event[n].url,'" target="_blank" rel="noreferrer noopener">').concat(e.event[n].photographer,"</a></i></p>\n        "),o.addEventListener("click",(function(){t._openPhotoModal(e.event[n])})),t._subpages.photo.querySelector("#photo-grid").appendChild(o)},c=0;c<e.event.length;++c)a(c);n()}))}},{key:"__buildSoftwareDOM",value:function(e){var t=this;return new Promise((function(n){for(var o=function(){var n=document.createElement("DIV");n.classList.add("website"),n.dataset.url=e.creation[r].url,n.innerHTML='\n          <img src="'.concat(e.creation[r].image,'" alt="mbp-website">\n          <h2>').concat(e.creation[r].name,"</h2>\n          <p>").concat(e.creation[r].bio[t._lang],"</p>\n        "),n.addEventListener("click",(function(){window.open(n.dataset.url,"_blank","noopener, noreferrer")})),t._subpages.software.querySelector("#mbp-website-grid").appendChild(n)},r=0;r<e.creation.length;++r)o();for(var i=function(){var n=document.createElement("DIV");n.classList.add("website"),n.dataset.url=e.artists[a].url,n.innerHTML='\n          <img src="'.concat(e.artists[a].image,'" alt="mbp-website">\n          <h2>').concat(e.artists[a].name,"</h2>\n        "),n.addEventListener("click",(function(){window.open(n.dataset.url,"_blank","noopener, noreferrer")})),t._subpages.software.querySelector("#band-website-grid").appendChild(n)},a=0;a<e.artists.length;++a)i();n()}))}},{key:"_events",value:function(){this._dom.querySelector("#music-subpage").addEventListener("click",this._switchView.bind(this,"music")),this._dom.querySelector("#podcast-subpage").addEventListener("click",this._switchView.bind(this,"podcast")),this._dom.querySelector("#video-subpage").addEventListener("click",this._switchView.bind(this,"video")),this._dom.querySelector("#photo-subpage").addEventListener("click",this._switchView.bind(this,"photo")),this._dom.querySelector("#software-subpage").addEventListener("click",this._switchView.bind(this,"software"))}},{key:"_openPhotoExpositionModal",value:function(e,t){var n=this;i.fetchPage("/assets/html/modal/expo.html").then((function(o){var r=document.createElement("DIV");r.classList.add("modal"),r.classList.add("expo"),r.appendChild(o),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_DESCRIPTION}}",n._nls.photo.expositionModalDescription),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_CUSTOMIZE}}",n._nls.photo.expositionModalCustomize),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_PRINT_SIZE}}",n._nls.photo.expositionModalPrintSize),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_PRINT_TYPE}}",n._nls.photo.expositionModalPrintType),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_PRINT_PAPER}}",n._nls.photo.expositionModalPrintPaper),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_PRINT_DIBOND}}",n._nls.photo.expositionModalPrintDibond),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_FRAME}}",n._nls.photo.expositionModalFrame),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_FRAME_NONE}}",n._nls.photo.expositionModalFrameNone),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_FRAME_BLACK}}",n._nls.photo.expositionModalFrameBlack),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_FRAME_WHITE}}",n._nls.photo.expositionModalFrameWhite),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_FRAME_WOOD}}",n._nls.photo.expositionModalFrameWood),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_MARGINS}}",n._nls.photo.expositionModalMargins),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_POSTAGE_FEES}}",n._nls.photo.expositionModalPostageFees),i.replaceString(r,"{{PHOTO_EXPOSITION_MODAL_ORDER}}",n._nls.photo.expositionModalOrder),r.querySelector("#expo-title").innerHTML=t.title,r.querySelector("#expo-author").innerHTML=t.photographer,r.querySelector("#selected-photo").src=t.photos[0].image,r.querySelector("#photo-title").innerHTML=t.photos[0].title,r.querySelector("#photo-date").innerHTML=i.formatDate(t.photos[0].date,n._lang);for(var a=0,c=r.querySelector("#photo-selector").children,l=function(e){c[e].innerHTML=t.photos[e].title,c[e].addEventListener("click",(function(){r.querySelector("#selected-photo").src=t.photos[e].image,r.querySelector("#photo-title").innerHTML=t.photos[e].title,r.querySelector("#photo-date").innerHTML=i.formatDate(t.photos[e].date,n._lang),c[a].classList.remove("selected"),c[e].classList.add("selected"),a=e}))},s=0;s<c.length;++s)l(s);var d=r.querySelector("#frame"),u="a3",m="paper",p="no",h=0,f=function(){h=parseInt(e.photo[m][u])+parseInt(e.photo.frame[u][p])+parseInt(e.photo.postal[u]),document.getElementById("order-price").innerHTML="".concat(h,"€")},_=function(e){document.getElementById("frame-size").children[1].classList.remove("selected"),document.getElementById("frame-size").children[2].classList.remove("selected"),document.getElementById("frame-size").children[e].classList.add("selected"),u=document.getElementById("frame-size").children[e].dataset.size,f()},y=function(e){document.getElementById("print-type").children[1].classList.remove("selected"),document.getElementById("print-type").children[2].classList.remove("selected"),document.getElementById("print-type").children[e].classList.add("selected"),m=document.getElementById("print-type").children[e].dataset.type,f()},v=function(e){for(var t=0;t<d.children.length;++t)d.children[t].classList.remove("selected");d.children[e].classList.add("selected"),p=d.children[e].dataset.frame,f()};r.querySelector("#frame-size").children[1].addEventListener("click",_.bind(n,1)),r.querySelector("#frame-size").children[2].addEventListener("click",_.bind(n,2)),r.querySelector("#print-type").children[1].addEventListener("click",y.bind(n,1)),r.querySelector("#print-type").children[2].addEventListener("click",y.bind(n,2));for(var g=1;g<d.children.length;++g)d.children[g].addEventListener("click",v.bind(n,g));r.querySelector("#print-margin").addEventListener("change",(function(e){e.target.checked?(r.querySelector("#selected-photo").style.padding="".concat(t.photos[a].margin/3,"%"),r.querySelector("#selected-photo").style.height="100%"):(r.querySelector("#selected-photo").style.padding=0,r.querySelector("#selected-photo").style.height="100%")})),r.querySelector("#place-order").addEventListener("click",(function(){window.open("mailto:contact@messe-basse-production.com?subject=Commander un tirage de ".concat(t.photographer,"&body=Bonjour, je souhaite commander un tirage de ").concat(t.photographer,", extrait de son exposition ").concat(t.title,". La photo, ").concat(t.photos[a].title," (").concat(t.photos[a].date,") est à imprimer en ").concat(u,", sur support ").concat(m,". Le choix du cadre est ").concat(p,", et ").concat(r.querySelector("#print-margin").checked?"avec":"sans"," marges.\nCe tirage reviens à ").concat(h,"€, frais postaux inclus pour la France. Nos équipes prennent en compte votre demande, et reviennent au plus vite vers vous. Merci de votre confiance!"),"_self")})),document.getElementById("overlay").appendChild(r);var b=function(e){-1!==["overlay","close-modal"].indexOf(e.target.id)&&(document.getElementById("overlay").style.opacity=0,setTimeout((function(){document.getElementById("overlay").style.display="none",document.getElementById("overlay").innerHTML=""}),300))};document.getElementById("overlay").style.display="flex",setTimeout((function(){return document.getElementById("overlay").style.opacity=1}),100),setTimeout((function(){r.style.opacity=1,document.getElementById("overlay").addEventListener("click",b),document.getElementById("close-modal").addEventListener("click",b)}),200)}))}},{key:"_openPhotoModal",value:function(e){i.fetchPage("/assets/html/modal/photo.html").then((function(t){var n=document.createElement("DIV");n.classList.add("modal"),n.classList.add("photo"),n.id="single-photo-modal",n.appendChild(t),n.getElementsByTagName("IMG")[0].src=e.image,n.getElementsByTagName("P")[1].innerHTML="".concat(e.name,' – © <i><a href="').concat(e.url,'" target="_blank" rel="noreferrer noopener">').concat(e.photographer,"</a></i>"),document.getElementById("overlay").appendChild(n);var o=function(e){-1!==["overlay","single-photo-modal","close-modal"].indexOf(e.target.id)&&(document.getElementById("overlay").style.opacity=0,setTimeout((function(){document.getElementById("overlay").style.display="none",document.getElementById("overlay").innerHTML=""}),300))};document.getElementById("overlay").style.display="flex",setTimeout((function(){return document.getElementById("overlay").style.opacity=1}),100),setTimeout((function(){n.style.opacity=1,document.getElementById("overlay").addEventListener("click",o),document.getElementById("close-modal").addEventListener("click",o)}),200)}))}},{key:"_switchView",value:function(e){var t=this;this._dom.querySelector("#subpage").style.opacity=0,this._dom.querySelector("#".concat(this._currentPage,"-subpage")).classList.remove("selected"),this._dom.querySelector("#".concat(e,"-subpage")).classList.add("selected");var n=null;switch(e){case"music":n=this._subpages.music;break;case"podcast":n=this._subpages.podcast;break;case"video":n=this._subpages.video;break;case"photo":n=this._subpages.photo;break;case"software":n=this._subpages.software;break;default:n=this._homePage.music}setTimeout((function(){t._dom.querySelector("#subpage").classList.remove(t._currentPage),t._dom.querySelector("#subpage").classList.add(e),t._currentPage=e,t._dom.querySelector("#subpage").innerHTML="",t._dom.querySelector("#subpage").appendChild(n),requestAnimationFrame((function(){t._dom.querySelector("#subpage").style.opacity=1,t._updateScrolls()}))}),300)}},{key:"_updateScrolls",value:function(){var e=this;setTimeout((function(){for(var t=0;t<e._scrolls.music.length;++t)e._scrolls.music[t].updateScrollbar()}),500)}},{key:"dom",get:function(){return this._updateScrolls(),this._dom}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_(o.key),o)}}function _(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:String(t)}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=t.lang,this._nls=t.nls,this._dom=null,this._now=null,this._initDOM().then(i.fetchData.bind(this,"events")).then(this._buildDOM.bind(this)).catch((function(e){return console.error(e)}))}var t,n;return t=e,(n=[{key:"_initDOM",value:function(){var e=this;return new Promise((function(t){e._dom=document.createElement("SECTION"),t()}))}},{key:"_buildDOM",value:function(e){var t=this;return new Promise((function(n){t._now=new Date;var o=t._now.getTimezoneOffset();t._now=new Date(t._now.getTime()-60*o*1e3),t._now=t._now.toISOString().split("T")[0];for(var r=!1,i=!1,a={},c=0;c<e.events.length;++c){if(!1===r&&e.events[c].date>t._now){r=!0;var l=document.createElement("H1");l.innerHTML=t._nls.upcoming,t._dom.appendChild(l)}else if(!1===i){i=!0;var s=document.createElement("H1");s.innerHTML=t._nls.past,t._dom.appendChild(s)}var d=e.events[c].date.slice(0,4);if(!a[d]&&e.events[c].date<t._now){a[d]=d;var u=document.createElement("H2");u.innerHTML=d,t._dom.appendChild(u)}var m=t.__buildEvent(e.events[c]);t._dom.appendChild(m)}n()}))}},{key:"__buildEvent",value:function(e){var t=document.createElement("DIV");t.classList.add("event");var n=document.createElement("IMG");n.src=e.image;var o=document.createElement("DIV");o.classList.add("content"),o.innerHTML='\n      <span>\n        <h1><a href="'.concat(e.link,'" target="_blank" rel="noreferrer noopener">').concat(e.title,"</a></h1>\n        <h2><i>").concat(i.formatDate(e.date,this._lang)," – ").concat(e.place,"</i></h2>\n      </span>\n      <p>").concat(e.description[this._lang],"</p>\n    "),o.innerHTML.replace("\n","");var r=document.createElement("DIV");r.classList.add("starring");for(var a=0;a<e.starring.length;++a){var c=document.createElement("A");c.innerHTML=e.starring[a].name,c.href=e.starring[a].url,c.target="_blank",c.rel="noreferrer noopener",r.appendChild(c)}return t.appendChild(n),t.appendChild(o),o.appendChild(r),t}},{key:"dom",get:function(){return this._dom}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}function b(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=v(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:String(t)}var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=t.lang,this._nls=t.nls,this._dom=null,i.fetchPage("/assets/html/merch.html").then(this._initDOM.bind(this)).then(this._translatePage.bind(this)).then(i.fetchData.bind(this,"merch")).then(this._buildDOM.bind(this)).catch((function(e){return console.error(e)}))}var t,n;return t=e,(n=[{key:"_initDOM",value:function(e){var t=this;return new Promise((function(n){t._dom=document.createElement("SECTION"),t._dom.appendChild(e),n()}))}},{key:"_translatePage",value:function(){var e=this;return new Promise((function(t){i.replaceString(e._dom,"{{MERCH_APPAREL}}",e._nls.apparel),i.replaceString(e._dom,"{{MERCH_MUSIC}}",e._nls.music),t()}))}},{key:"_buildDOM",value:function(e){var t=this;return new Promise((function(n){for(var o=t._dom.querySelector("#musical-merch"),r=0;r<e.albums.length;++r){var i=t.__buildMusicalMerch(e.albums[r]);o.appendChild(i)}for(var a=t._dom.querySelector("#apparel-merch"),c=0;c<e.apparel.length;++c){var l=t.__buildApparelMerch(e.apparel[c]);a.appendChild(l)}n()}))}},{key:"__buildApparelMerch",value:function(e){var t=document.createElement("DIV");t.classList.add("merch-item");var n=document.createElement("IMG");n.src=e.image;var o=document.createElement("H2");o.innerHTML=e.name;var r=document.createElement("P");r.innerHTML="".concat(this._nls.by," <b>").concat(e.designer,"</b>");var i=document.createElement("P");i.innerHTML="".concat(e.type," : ").concat(e.price,"*");var a=document.createElement("I");a.innerHTML=this._nls.postageFee;var c=document.createElement("BUTTON");return c.innerHTML=this._nls.orderOne,c.addEventListener("click",(function(){window.open("mailto:contact@messe-basse-production.com?subject=Commander le vêtement ".concat(e.name,"&body=Bonjour, je souhaite commander le vêtement ").concat(e.name," de ").concat(e.designer,". Ce vêtement reviens à ").concat(e.price,", frais postaux non inclus pour la France. Nos équipes prennent en compte votre demande, et reviennent au plus vite vers vous. Merci de votre confiance!"),"_self")})),t.appendChild(n),t.appendChild(o),t.appendChild(r),t.appendChild(i),t.appendChild(a),t.appendChild(c),t}},{key:"__buildMusicalMerch",value:function(e){var t=document.createElement("DIV");t.classList.add("merch-item");var n=document.createElement("IMG");n.src=e.image;var o=document.createElement("H2");o.innerHTML=e.name;var r=document.createElement("P");r.innerHTML="".concat(this._nls.regularAlbum," : <b>").concat(e.price.regular,"*</b>");var i=document.createElement("P");i.innerHTML="".concat(this._nls.signedAlbum," : <b>").concat(e.price.signed,"*</b>");var a=document.createElement("I");a.innerHTML=this._nls.postageFee;var c=document.createElement("BUTTON");return c.innerHTML=this._nls.orderOne,c.addEventListener("click",(function(){window.open("mailto:contact@messe-basse-production.com?subject=Commander le disque ".concat(e.name,"&body=Bonjour, je souhaite commander le disque ").concat(e.name,". Nos équipes prennent en compte votre demande, et reviennent au plus vite vers vous. Merci de votre confiance!"),"_self")})),t.appendChild(n),t.appendChild(o),t.appendChild(r),t.appendChild(i),t.appendChild(a),t.appendChild(c),t}},{key:"dom",get:function(){return this._dom}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,I(o.key),o)}}function I(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=S(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:String(t)}var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=t.lang,this._nls=t.nls,this._dom=null,this._docScroll=null,i.fetchPage("/assets/html/contact.html").then(this._initDOM.bind(this)).then(this._translatePage.bind(this)).then(i.fetchData.bind(this,"contact")).then(this._buildDOM.bind(this)).catch((function(e){return console.error(e)}))}var t,n;return t=e,(n=[{key:"_initDOM",value:function(e){var t=this;return new Promise((function(n){t._dom=document.createElement("SECTION"),t._dom.appendChild(e),n()}))}},{key:"_translatePage",value:function(){var e=this;return new Promise((function(t){i.replaceString(e._dom,"{{CONTACT_TITLE}}",e._nls.title),i.replaceString(e._dom,"{{CONTACT_DESCRIPTION1}}",e._nls.description1),i.replaceString(e._dom,"{{CONTACT_DESCRIPTION2}}",e._nls.description2),i.replaceString(e._dom,"{{CONTACT_DESCRIPTION3}}",e._nls.description3),i.replaceString(e._dom,"{{CONTACT_TEAM}}",e._nls.team),i.replaceString(e._dom,"{{CONTACT_DOCUMENTATION}}",e._nls.documentation),t()}))}},{key:"_buildDOM",value:function(e){var t=this;return new Promise((function(n){for(var o=t._dom.querySelector("#leaders"),r=0;r<e.leaders.length;++r){var i=t.__buildMember(e.leaders[r]);o.appendChild(i)}for(var a=t._dom.querySelector("#members"),c=0;c<e.members.length;++c){var l=t.__buildMember(e.members[c]);a.appendChild(l)}for(var s=t._dom.querySelector("#documents"),d=0;d<e.documents.length;++d){var u=t.__buildDocument(e.documents[d]);s.appendChild(u)}t._dom.querySelector("#credit-modal").addEventListener("click",t._openCreditModal.bind(t)),t._docScroll=new window.ScrollBar({target:t._dom.querySelector("#documents"),minSize:90}),n()}))}},{key:"__buildMember",value:function(e){var t=document.createElement("DIV");t.classList.add("member");var n=document.createElement("IMG");n.src=e.image;var o=document.createElement("H2");o.innerHTML=e.name;var r=document.createElement("H3");return r.innerHTML=this._nls.roles[e.role],t.appendChild(n),t.appendChild(o),t.appendChild(r),t}},{key:"__buildDocument",value:function(e){var t=document.createElement("A");t.classList.add("doc-download"),t.download=!0,t.href=e.url;var n=document.createElement("IMG");n.src="/assets/img/logo/pdf.svg";var o=document.createElement("P");o.innerHTML=e.name;var r=document.createElement("SPAN");return r.innerHTML=i.formatDate(e.date,this._lang),t.appendChild(n),t.appendChild(o),o.appendChild(r),t}},{key:"_openCreditModal",value:function(){var e=this;i.fetchPage("/assets/html/modal/credit.html").then((function(t){var n=document.createElement("DIV");n.classList.add("modal"),n.classList.add("credit"),n.appendChild(t),i.replaceString(n,"{{ABOUT_TITLE}}",e._nls.aboutTitle),i.replaceString(n,"{{ABOUT_DESCRIPTION1}}",e._nls.aboutDescription1),i.replaceString(n,"{{ABOUT_DESCRIPTION2}}",e._nls.aboutDescription2),i.replaceString(n,"{{ABOUT_DESCRIPTION3}}",e._nls.aboutDescription3),i.replaceString(n,"{{ABOUT_DESCRIPTION4}}",e._nls.aboutDescription4),i.replaceString(n,"{{ABOUT_CLOSE}}",e._nls.aboutClose),document.getElementById("overlay").appendChild(n);var o=function(e){-1!==["overlay","close-modal"].indexOf(e.target.id)&&(document.getElementById("overlay").style.opacity=0,setTimeout((function(){document.getElementById("overlay").style.display="none",document.getElementById("overlay").innerHTML=""}),300))};document.getElementById("overlay").style.display="flex",setTimeout((function(){return document.getElementById("overlay").style.opacity=1}),100),setTimeout((function(){n.style.opacity=1,document.getElementById("overlay").addEventListener("click",o),document.getElementById("close-modal").addEventListener("click",o)}),200)}))}},{key:"_updateScrolls",value:function(){var e=this;setTimeout((function(){return e._docScroll.updateScrollbar()}),500)}},{key:"dom",get:function(){return this._updateScrolls(),this._dom}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,L(o.key),o)}}function L(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=w(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:String(t)}var M=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang="en",this._nls=null,this._version="0.1.3",this.evts=new window.CustomEvents,this._scroll=null,this._currentPage="home",this._homePage=null,this._creationPage=null,this._eventsPage=null,this._merchPage=null,this._contactPage=null,this._fetchLang().then((function(){t._translateNav().then(t._buildHomepage.bind(t)).then(t._endLoading.bind(t)).then(t._animateNav.bind(t)),t._buildPages().then(t._events.bind(t)),t._displayConsoleWelcome()}))}var t,n;return t=e,(n=[{key:"_fetchLang",value:function(){var e=this;return new Promise((function(t,n){fetch("assets/json/nls/".concat(e._lang,".json")).then((function(o){o.text().then((function(n){e._nls=JSON.parse(n),t()})).catch(n)})).catch(n)}))}},{key:"_translateNav",value:function(){var e=this;return new Promise((function(t){var n=document.getElementById("navigation");i.replaceString(n,"{{NAVBAR_HOME}}",e._nls.nav.home),i.replaceString(n,"{{NAVBAR_CREATION}}",e._nls.nav.creation),i.replaceString(n,"{{NAVBAR_EVENTS}}",e._nls.nav.events),i.replaceString(n,"{{NAVBAR_MERCH}}",e._nls.nav.merch),i.replaceString(n,"{{NAVBAR_CONTACT}}",e._nls.nav.contact),t()}))}},{key:"_buildHomepage",value:function(){var e=this;return new Promise((function(t){e._homePage=new s({lang:e._lang,nls:e._nls.home}),t()}))}},{key:"_endLoading",value:function(){return new Promise((function(e){setTimeout((function(){document.body.removeChild(document.getElementById("flashing-text-logo")),document.getElementById("scene").style.opacity=1,e()}),4e3)}))}},{key:"_animateNav",value:function(){return new Promise((function(e){document.getElementById("navigation").style.opacity=1,setTimeout((function(){document.getElementById("link-home").style.animation="drop-nav-link 1.4s forwards",document.getElementById("link-home").style.opacity=1}),100),setTimeout((function(){document.getElementById("link-creation").style.animation="drop-nav-link 1.3s forwards",document.getElementById("link-creation").style.opacity=1}),200),setTimeout((function(){document.getElementById("link-events").style.animation="drop-nav-link 1.2s forwards",document.getElementById("link-events").style.opacity=1}),300),setTimeout((function(){document.getElementById("link-merch").style.animation="drop-nav-link 1.1s forwards",document.getElementById("link-merch").style.opacity=1}),400),setTimeout((function(){document.getElementById("link-contact").style.animation="drop-nav-link 1s forwards",document.getElementById("link-contact").style.opacity=1}),500),setTimeout((function(){document.getElementById("socials").style.opacity=1,e()}),1250)}))}},{key:"_buildPages",value:function(){var e=this;return new Promise((function(t){e._creationPage=new p({lang:e._lang,nls:e._nls.creation}),e._eventsPage=new y({lang:e._lang,nls:e._nls.events}),e._merchPage=new E({lang:e._lang,nls:e._nls.merch}),e._contactPage=new O({lang:e._lang,nls:e._nls.contact}),t()}))}},{key:"_events",value:function(){document.getElementById("link-home").addEventListener("click",this._switchView.bind(this,"home")),document.getElementById("link-creation").addEventListener("click",this._switchView.bind(this,"creation")),document.getElementById("link-events").addEventListener("click",this._switchView.bind(this,"events")),document.getElementById("link-merch").addEventListener("click",this._switchView.bind(this,"merch")),document.getElementById("link-contact").addEventListener("click",this._switchView.bind(this,"contact"))}},{key:"_switchView",value:function(e){var t=this;document.getElementById("scene").style.opacity=0,document.getElementById("link-".concat(this._currentPage)).classList.remove("selected"),document.getElementById("link-".concat(e)).classList.add("selected");var n=null;switch(e){case"home":default:n=this._homePage.dom;break;case"creation":n=this._creationPage.dom;break;case"events":n=this._eventsPage.dom;break;case"merch":n=this._merchPage.dom;break;case"contact":n=this._contactPage.dom}setTimeout((function(){document.getElementById("scene").classList.remove(t._currentPage),document.getElementById("scene").classList.add(e),t._currentPage=e,document.getElementById("scene").innerHTML="",document.getElementById("scene").appendChild(n),requestAnimationFrame((function(){document.getElementById("scene").style.opacity=1,t._scroll=new window.ScrollBar({target:document.getElementById("scene"),minSize:90})}))}),300)}},{key:"_displayConsoleWelcome",value:function(){console.log("%cHello, you hacky nerd!","font-size:16pt"),console.log("Do you have some piece of code you want to promote or do you need a hand with it ?\nReach %ccontact@messe-basse-production.com%cso we can find a way to help you!","text-decoration:underline;color:blue")}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.MBP=t.default}();